<!DOCTYPE html>
<html>
<head>
	<title>ChatBot Page</title>
</head>
<style>
	.open-button {
		color: white;
		padding:0px;
		border: none;
		cursor: pointer;
		opacity: 0.8;
		position: fixed;
		bottom: 23px;
		right: 10px;
		
	  }
	#chat-container {
		display: none;
		position: fixed;
		bottom: 20px;
		right: 70px;
		width: 350px;
		height: 500px;
		border-radius: 10px;
		overflow: hidden;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
	  }
	  .chat-header {
		background-color: #007bff;
		color: #fff;
		padding: 10px;
	  }
	  .chat-body {
		height: 340px;
		overflow-y: scroll;
		padding: 10px;
		background-color: #f9f9f9;
	  }
	  .chat-footer {
		background-color: #f9f9f9;
		padding: 5px;
		border-top: 1px solid #ccc;
	  }
	  .messageDiv{
		padding: 8px 8px 8px 0px;
		margin:12px 0px;
		
  }
	  .message{
		margin:15px 0px;
		border: none;
		padding: 10px;
		border-radius: 5px;
		box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
		font-size: 16px;
	  }
	  .inputField{
		width: 95%;
		border: none;
		height: 25px;
		outline: none;
		padding-left: 15px;
		background-color: transparent;
	}
	.inputField:focus{
		outline:4px solid #007bff;
		
	}
	
</style>
<body>
	<button Onclick="acessBtn()">Get Acess Token</button>
	<button class="open-button" onclick="openForm()"><img src="https://e7.pngegg.com/pngimages/498/917/png-clipart-computer-icons-desktop-chatbot-icon-blue-angle-thumbnail.png" style="width: 50px;height: 50px;"></button>
    <div id="chat-container">
		<div class="chat-header">
			<h1>Chat Bot</h1>
		</div>
		<div class="chat-body">
			<div id="chat-messages">
				<div class="message">Hello, how can I assist you?</div>
			  </div>
		</div>
      
	  <div class="chat-footer">
		<input type="text" class="inputField" id="user-message" placeholder="Type your message here...">
	  </div> 
    </div>
	<script>
		var count=0;
		function openForm() {
		   if(count==0){
			document.getElementById("chat-container").style.display = "block";
			count++;
		   }
		   else if (count==1){
			document.getElementById("chat-container").style.display = "none";
			count--;
		   }

		}
	
		</script>
    <script>
		function acessBtn(){
			var clientId= "3MVG9fe4g9fhX0E4rB1MeKF0UTUC0MIyoSgh1s93CRKKtf0Jqt2Tu7087Isfn2kAFc._.530IW.XtK3lowSxk";
			var clientSecret= "BA2470D1D4FF3761AA981A03773AC01547A5E7CBA35B116247702F858902B302";
			var username= "dipanshu@aethereus.com";
			var password= "6376Dip#@";
			var securityToken="PPkkvprQvWSHUTAojNnKzlp20";
			var callback="file:///C:/Users/Dipanshu/Desktop/Aethereus/ChatGpt.html";
			getSalesforceAccessToken(clientId, clientSecret, username, password, securityToken, callback);
		}
		function getSalesforceAccessToken(clientId, clientSecret, username, password, securityToken, callback) {
			var xhr = new XMLHttpRequest();
			xhr.open('POST', 'https://login.salesforce.com/services/oauth2/token', true);
			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xhr.onreadystatechange = function() {
			  if (xhr.readyState === 4 && xhr.status === 200) {
				var response = JSON.parse(xhr.responseText);
				var accessToken = response.access_token;
				var instanceUrl = response.instance_url;
				callback(null, accessToken, instanceUrl);
			  } else if (xhr.readyState === 4) {
				callback(new Error('Failed to obtain Salesforce access token'));
			  }
			};
		  
			var params = 'grant_type=password' +
						 '&client_id=' + encodeURIComponent(clientId) +
						 '&client_secret=' + encodeURIComponent(clientSecret) +
						 '&username=' + encodeURIComponent(username) +
						 '&password=' + encodeURIComponent(password + securityToken);
		  
			var ap=xhr.send(params);
           console.log(ap);
		  }
		 		  
     function getData(){
          fetch(`https://api.openai.com/v1/completions`, {
             body: JSON.stringify({
             model: "text-davinci-003",
             prompt: task + "/" + "message" + message,
             temperature: 1,
             max_tokens: 200,
            }),
            
            method: "POST",
            headers: {
             "content-type": "application/json",
             Authorization: "Bearer " + apiKey,
             },
         })
          .then(response => response.json())
          .then(data => {
			console.log(data.choices[0].text);
		  })
          .catch(error => console.error(error));
	 }	
    </script>
  </body>
</html>
